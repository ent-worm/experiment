.PHONY: codegen proto wire
codegen: proto wire

buf:
	buf --config api/pb/buf.yaml check lint

proto: buf
	protoc -I api/pb/ --go_out=plugins=grpc:api/pb api/pb/*.proto

wire:
	wire ./...

.PHONY: e2etest
e2etest: codegen
	go test -v ./test/

.PHONY: serve
serve: codegen
	go run main.go serve
